<!-- Enhanced Link Shortener UI Elements -->
<style>
.pro-banner {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
    padding: 2rem;
    border-radius: 1rem;
    margin-bottom: 2rem;
    text-align: center;
    box-shadow: 0 10px 30px rgba(245, 87, 108, 0.3);
}

.pro-banner h2 {
    margin: 0;
    font-size: 2.5rem;
    font-weight: 900;
}

.pro-features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin: 2rem 0;
}

.pro-feature {
    background: white;
    padding: 1.5rem;
    border-radius: 0.75rem;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transition: transform 0.3s;
}

.pro-feature:hover {
    transform: translateY(-5px);
}

.pro-feature-icon {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
}

.pro-feature-title {
    font-weight: 700;
    margin-bottom: 0.25rem;
}

.pro-feature-desc {
    font-size: 0.875rem;
    color: #666;
}

.analytics-container {
    background: white;
    border-radius: 1rem;
    padding: 2rem;
    margin: 2rem 0;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.chart-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.bulk-uploader {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 2rem;
    border-radius: 1rem;
    color: white;
    margin: 2rem 0;
}

.utm-builder {
    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    padding: 2rem;
    border-radius: 1rem;
    margin: 2rem 0;
}

.ab-testing {
    background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
    padding: 2rem;
    border-radius: 1rem;
    color: white;
    margin: 2rem 0;
}
</style>

<!-- Pro Banner -->
<div class="pro-banner">
    <h2>ğŸš€ LINK SHORTENER PRO</h2>
    <p style="font-size: 1.25rem; margin: 0.5rem 0 0;">Advanced URL Management with Analytics & Automation</p>
    <div class="feature-badges" style="display: flex; gap: 0.5rem; justify-content: center; margin-top: 1rem; flex-wrap: wrap;">
        <span class="badge" style="background: rgba(255,255,255,0.3); padding: 0.5rem 1rem; border-radius: 2rem;">ğŸ“Š Advanced Analytics</span>
        <span class="badge" style="background: rgba(255,255,255,0.3); padding: 0.5rem 1rem; border-radius: 2rem;">ğŸŒ Geographic Tracking</span>
        <span class="badge" style="background: rgba(255,255,255,0.3); padding: 0.5rem 1rem; border-radius: 2rem;">ğŸ”„ A/B Testing</span>
        <span class="badge" style="background: rgba(255,255,255,0.3); padding: 0.5rem 1rem; border-radius: 2rem;">ğŸ“¦ Bulk Operations</span>
        <span class="badge" style="background: rgba(255,255,255,0.3); padding: 0.5rem 1rem; border-radius: 2rem;">ğŸ” Advanced Security</span>
    </div>
</div>

<!-- Pro Features Grid -->
<div class="pro-features">
    <div class="pro-feature">
        <div class="pro-feature-icon">ğŸ“Š</div>
        <div class="pro-feature-title">Analytics Dashboard</div>
        <div class="pro-feature-desc">Real-time charts & insights</div>
    </div>
    <div class="pro-feature">
        <div class="pro-feature-icon">ğŸŒ</div>
        <div class="pro-feature-title">Geo Tracking</div>
        <div class="pro-feature-desc">Track clicks by location</div>
    </div>
    <div class="pro-feature">
        <div class="pro-feature-icon">ğŸ“±</div>
        <div class="pro-feature-title">Device Analytics</div>
        <div class="pro-feature-desc">Desktop, mobile, tablet stats</div>
    </div>
    <div class="pro-feature">
        <div class="pro-feature-icon">ğŸ”„</div>
        <div class="pro-feature-title">Link Rotation</div>
        <div class="pro-feature-desc">Split traffic across URLs</div>
    </div>
    <div class="pro-feature">
        <div class="pro-feature-icon">ğŸ¯</div>
        <div class="pro-feature-title">UTM Builder</div>
        <div class="pro-feature-desc">Campaign tracking made easy</div>
    </div>
    <div class="pro-feature">
        <div class="pro-feature-icon">ğŸ“¦</div>
        <div class="pro-feature-title">Bulk Shortening</div>
        <div class="pro-feature-desc">Upload CSV files</div>
    </div>
</div>

<!-- Analytics Dashboard -->
<div class="analytics-container">
    <h2 style="margin-top: 0;">ğŸ“Š Advanced Analytics Dashboard</h2>
    <div id="chartsContainer" class="chart-grid">
        <div><canvas id="clicksChart"></canvas></div>
        <div><canvas id="geoChart"></canvas></div>
        <div><canvas id="deviceChart"></canvas></div>
        <div><canvas id="browserChart"></canvas></div>
    </div>
</div>

<!-- Bulk URL Shortener -->
<div class="bulk-uploader">
    <h3 style="margin-top: 0;">ğŸ“¦ Bulk URL Shortener</h3>
    <p>Upload a CSV file or paste multiple URLs (one per line)</p>
    <textarea id="bulkUrls" class="form-input" rows="6" placeholder="https://example.com/page1
https://example.com/page2
https://example.com/page3" style="margin-top: 1rem;"></textarea>
    <div style="margin-top: 1rem; display: flex; gap: 1rem;">
        <input type="file" accept=".csv" id="csvFile" style="flex: 1; padding: 0.75rem; border-radius: 0.5rem; border: 2px solid white;">
        <button class="dork-btn" style="background: white; color: #667eea;" onclick="processBulkUrls()">âš¡ Shorten All</button>
    </div>
    <div id="bulkResults" style="margin-top: 1rem; display: none;"></div>
</div>

<!-- UTM Builder -->
<div class="utm-builder">
    <h3 style="margin-top: 0;">ğŸ¯ UTM Parameter Builder</h3>
    <p style="color: #333;">Build trackable campaign URLs with UTM parameters</p>
    <div style="display: grid; gap: 1rem; margin-top: 1rem;">
        <input type="text" id="baseUrl" class="form-input" placeholder="Base URL (https://example.com)">
        <input type="text" id="utmSource" class="form-input" placeholder="Source (e.g., newsletter)">
        <input type="text" id="utmMedium" class="form-input" placeholder="Medium (e.g., email)">
        <input type="text" id="utmCampaign" class="form-input" placeholder="Campaign (e.g., summer_sale)">
        <input type="text" id="utmTerm" class="form-input" placeholder="Term (optional)">
        <input type="text" id="utmContent" class="form-input" placeholder="Content (optional)">
        <button class="dork-btn" style="background: #333; color: white;" onclick="buildUTM()">ğŸ”— Build URL</button>
        <div id="utmResult" style="background: white; padding: 1rem; border-radius: 0.5rem; display: none;"></div>
    </div>
</div>

<!-- A/B Testing -->
<div class="ab-testing">
    <h3 style="margin-top: 0;">ğŸ”„ A/B Testing</h3>
    <p>Split test multiple destination URLs</p>
    <textarea id="abUrls" class="form-input" rows="4" placeholder="Enter variant URLs (one per line)
https://example.com/version-a
https://example.com/version-b" style="margin-top: 1rem;"></textarea>
    <button class="dork-btn" style="margin-top: 1rem; background: white; color: #330867;" onclick="createABTest()">ğŸš€ Create A/B Test</button>
</div>

<script>
// Initialize Analytics Dashboard
window.addEventListener('DOMContentLoaded', () => {
    if (typeof window.linkShortenerPro !== 'undefined') {
        console.log('Initializing Pro Analytics Dashboard...');
        // Dashboard will be initialized when data is available
    }
});

function processBulkUrls() {
    const bulkText = document.getElementById('bulkUrls').value;
    const urls = bulkText.split('\n').filter(u => u.trim().startsWith('http'));
    
    if (urls.length === 0) {
        alert('Please enter at least one valid URL');
        return;
    }
    
    alert(`Processing ${urls.length} URLs...`);
    window.linkShortenerPro.bulkShortenUrls(urls).then(results => {
        document.getElementById('bulkResults').style.display = 'block';
        document.getElementById('bulkResults').innerHTML = `
            <h4>âœ… Bulk Shortening Complete!</h4>
            <div style="background: white; padding: 1rem; border-radius: 0.5rem; color: #333; max-height: 300px; overflow-y: auto;">
                ${results.map(r => `
                    <div style="padding: 0.5rem; border-bottom: 1px solid #eee;">
                        <div><strong>Original:</strong> ${r.original}</div>
                        <div><strong>Short:</strong> ${r.short || r.error}</div>
                    </div>
                `).join('')}
            </div>
        `;
    });
}

function buildUTM() {
    const baseUrl = document.getElementById('baseUrl').value;
    const source = document.getElementById('utmSource').value;
    const medium = document.getElementById('utmMedium').value;
    const campaign = document.getElementById('utmCampaign').value;
    const term = document.getElementById('utmTerm').value;
    const content = document.getElementById('utmContent').value;
    
    if (!baseUrl || !source || !medium || !campaign) {
        alert('Please fill in required fields (URL, Source, Medium, Campaign)');
        return;
    }
    
    const builder = new window.linkShortenerPro.UTMBuilder();
    builder.setSource(source)
           .setMedium(medium)
           .setCampaign(campaign);
    
    if (term) builder.setTerm(term);
    if (content) builder.setContent(content);
    
    const finalUrl = builder.build(baseUrl);
    
    document.getElementById('utmResult').style.display = 'block';
    document.getElementById('utmResult').innerHTML = `
        <h4 style="margin-top: 0; color: #333;">âœ… UTM URL Generated!</h4>
        <div style="word-break: break-all; color: #333; background: #f0f0f0; padding: 1rem; border-radius: 0.5rem;">
            ${finalUrl}
        </div>
        <button onclick="navigator.clipboard.writeText('${finalUrl}')" style="margin-top: 0.5rem; padding: 0.5rem 1rem; background: #fa709a; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">ğŸ“‹ Copy URL</button>
    `;
}

function createABTest() {
    const abText = document.getElementById('abUrls').value;
    const variants = abText.split('\n').filter(u => u.trim().startsWith('http'));
    
    if (variants.length < 2) {
        alert('Please enter at least 2 variant URLs for A/B testing');
        return;
    }
    
    const testId = 'test_' + Date.now();
    const manager = new window.linkShortenerPro.ABTestManager();
    manager.createTest(testId, variants);
    
    alert(`A/B Test created with ${variants.length} variants!\\nTest ID: ${testId}`);
}
</script>
